@setlocal
@del BAD.BAD>nul
@set OK_BEEP=SI
@if not %1. == RUN.  goto mustcompile 
@shift
@if exist %1.exe goto runonly
:mustcompile
@if exist %1.c   set pgm=%1.c
@if exist %1.cpp set pgm=%1.cpp
bcc +nodbg.cfg -ls %pgm% OOLIB.LIB OOLIB2.LIB UTENTE.LIB SIPAX.LIB MOTO2.LIB 
@if errorlevel 1 goto BAD
@del e:\TMP\%1.obj
@copy e:\TMP\%1.exe
@if NOT %OK_DMPGET%. == . dmpget  %1.exe e:\TMP\%1.MAP /E
@del e:\TMP\%1.exe
%1.exe %2 %3 %4 %5 %6 %7 %8 %9
@if errorlevel 1 goto BAD2
@if %USADATIESTRATTI%. == . DEL %1.EXE
@DEL e:\TMP\%1.MAP
@goto fine
:runonly
%1 %2 %3 %4 %5 %6 %7 %8 %9
@if errorlevel 1 goto BAD2
@goto fine
:bad
@echo "KO" >BAD.BAD
@echo Compilazione in errore
call BEEP
goto fine
:bad2
@echo "KO" >BAD.BAD
@echo Esecuzione in errore
call BEEP
goto fine
:fine
